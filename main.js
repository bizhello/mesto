(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function t(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=t((function e(t,r,o,i){var u=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n(this,"_removeElement",(function(){u.view.remove(),u.view=null})),n(this,"_setListener",(function(){u.view.querySelector(".element__like").addEventListener("click",(function(e){e.target.classList.toggle("element__like_active")})),u.view.querySelector(".element__trash").addEventListener("click",u._removeElement),u._cardImage.addEventListener("click",u._handleCardClick)})),n(this,"createCard",(function(){return u.view=u._template.content.cloneNode(!0).querySelector(".element"),u._cardImage=u.view.querySelector(".element__photo"),u.view.querySelector(".element__title").textContent=u._elementTitle,u._cardImage.alt=u._elementTitle,u._cardImage.src=u._elementPhoto,u._setListener(),u.view})),this._elementTitle=t,this._elementPhoto=r,this._template=document.querySelector(o),this._handleCardClick=i})),o={nameError:"popup__name_error",buttonInvalid:"popup__button_invalid",buttonValid:"popup__button_valid",buttonSubmit:".popup__button"};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),u(this,"_handleFormSubmit",(function(e){e.preventDefault()})),u(this,"_handleFormInput",(function(e){var t=e.target;r._setCustomError(t),r.setSubmitButtonState()})),u(this,"_setCustomError",(function(e){e.validity.valid?(e.classList.remove(r._config.nameError),document.querySelector("#".concat(e.id,"-error")).textContent=""):(e.classList.add(r._config.nameError),document.querySelector("#".concat(e.id,"-error")).textContent=e.validationMessage)})),u(this,"setSubmitButtonState",(function(){r._formElement.checkValidity()?(r._button.classList.remove(r._config.buttonInvalid),r._button.classList.add(r._config.buttonValid),r._button.removeAttribute("disabled")):(r._button.classList.add(r._config.buttonInvalid),r._button.classList.remove(r._config.buttonValid),r._button.setAttribute("disabled","true"))})),this._config=t,this._formElement=n,this._button=this._formElement.querySelector(this._config.buttonSubmit)}var t,n;return t=e,(n=[{key:"setEventListeners",value:function(){this._formElement.addEventListener("submit",this._handleFormSubmit),this._formElement.addEventListener("input",this._handleFormInput)}}])&&i(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.popup=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this)}var t,n;return t=e,(n=[{key:"open",value:function(){this.popup.classList.add("popup_opened"),this._handleEscClose()}},{key:"close",value:function(){this.popup.classList.remove("popup_opened"),this.popup.removeEventListener("keydown",this._handleEscClose)}},{key:"_handleEscClose",value:function(){var e=this;document.addEventListener("keydown",(function(t){"Escape"===t.key&&e.close()}))}},{key:"setEventListeners",value:function(){var e=this;this.popup.addEventListener("mousedown",(function(t){(t.target===t.currentTarget||t.target.classList.contains("popup__close"))&&e.close()}))}}])&&a(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(){return f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=d(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},f.apply(this,arguments)}function d(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=m(e)););return e}function y(e,t){return y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},y(e,t)}function h(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=m(r);if(o){var n=m(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return h(this,e)});function u(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,t))._callbackSubmitForm=e,n._inputList=n.popup.querySelectorAll(".popup__name"),n._form=n.popup.querySelector(".popup__container"),n}return t=u,(n=[{key:"close",value:function(){f(m(u.prototype),"close",this).call(this),this._form.reset()}},{key:"_getInputValues",value:function(){var e=this;return this.values={},this._inputList.forEach((function(t){e.values[t.name]=t.value})),this.values}},{key:"setEventListeners",value:function(){var e=this;f(m(u.prototype),"setEventListeners",this).call(this),this.popup.addEventListener("submit",(function(){e._callbackSubmitForm(e._getInputValues()),e.close()}))}}])&&p(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(l);function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(){return g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=w(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},g.apply(this,arguments)}function w(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=O(e)););return e}function S(e,t){return S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},S(e,t)}function E(e,t){if(t&&("object"===b(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function O(e){return O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},O(e)}var j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=O(r);if(o){var n=O(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return E(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,e))._imagePopup=t.popup.querySelector(".popup-fullscreen__image"),t._titlePopup=t.popup.querySelector(".popup-fullscreen__title"),t}return t=u,(n=[{key:"open",value:function(e,t){this._imagePopup.src=t,this._imagePopup.alt=e,this._titlePopup.textContent=e,g(O(u.prototype),"open",this).call(this)}}])&&_(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(l);function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var P=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._items=t,this._renderer=n,this._containerSelector=document.querySelector(r)}var t,n;return t=e,(n=[{key:"renderSection",value:function(){var e=this;this._items.forEach((function(t){e._renderer(t)}))}},{key:"addItem",value:function(e){this._containerSelector.prepend(e)}}])&&k(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var C=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._profileName=document.querySelector(t),this._profileStatus=document.querySelector(n)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return this.values={name:this._profileName.textContent,status:this._profileStatus.textContent},this.values}},{key:"setUserInfo",value:function(e,t){this._profileName.textContent=e,this._profileStatus.textContent=t}}])&&L(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),q=document.querySelector(".profile__button"),x=document.querySelector(".popup-add-element__container"),I=document.querySelector(".profile__edit"),R=document.querySelector(".profile-popup__container"),T=document.querySelector("#popup-status"),B=document.querySelector("#popup-name"),F=new C(".profile__name",".profile__status"),V=new j(".popup-fullscreen");V.setEventListeners();var D=new v((function(e){F.setUserInfo(e["popup-name"],e["popup-status"])}),".profile-popup");D.setEventListeners();var N=new v((function(e){A.addItem(U(e["popup-add-element-name"],e["popup-add-element-src"]))}),".popup-add-element");function U(e,t){return new r(e,t,".template",(function(){V.open(e,t)})).createCard()}N.setEventListeners(),I.addEventListener("click",(function(){var e=F.getUserInfo();B.value=e.name,T.value=e.status,z.setSubmitButtonState(),D.open()}));var A=new P([{title:"Архыз",photo:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{title:"Челябинская область",photo:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{title:"Иваново",photo:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{title:"Камчатка",photo:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{title:"Холмогорский район",photo:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{title:"Байкал",photo:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}],(function(e){A.addItem(U(e.title,e.photo))}),".elements");A.renderSection(),q.addEventListener("click",(function(){M.setSubmitButtonState(),N.open()}));var z=new c(o,R),M=new c(o,x);z.setEventListeners(),M.setEventListeners()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFRb0UsR0FDaERvQixFQUFzQixJQUFJbkYsRUFBY0wsRUFBUWtFLEdBRXREb0IsRUFBb0JiLG9CQUNwQmUsRUFBb0JmLHFCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvY29uZmlnLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvaW5pdGlhbENhcmRzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjbGFzcyBDYXJkIHtcbiAgICBjb25zdHJ1Y3RvcihlbGVtZW50VGl0bGUsIGVsZW1lbnRQaG90bywgdGVtcGxhdGUsIGhhbmRsZUNhcmRDbGljaykge1xuICAgICAgICB0aGlzLl9lbGVtZW50VGl0bGUgPSBlbGVtZW50VGl0bGU7XG4gICAgICAgIHRoaXMuX2VsZW1lbnRQaG90byA9IGVsZW1lbnRQaG90bztcbiAgICAgICAgdGhpcy5fdGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRlbXBsYXRlKTtcbiAgICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xuICAgIH1cblxuICAgIF9yZW1vdmVFbGVtZW50ID0gKCkgPT4ge1xuICAgICAgICB0aGlzLnZpZXcucmVtb3ZlKCk7XG4gICAgICAgIHRoaXMudmlldyA9IG51bGw7XG4gICAgfVxuXG4gICAgX3NldExpc3RlbmVyID0gKCkgPT4ge1xuICAgICAgICB0aGlzLnZpZXcucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2xpa2UnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldnQgPT4ge1xuICAgICAgICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QudG9nZ2xlKCdlbGVtZW50X19saWtlX2FjdGl2ZScpXG4gICAgICAgIH0pKTtcbiAgICAgICAgdGhpcy52aWV3LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X190cmFzaCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5fcmVtb3ZlRWxlbWVudCk7XG4gICAgICAgIHRoaXMuX2NhcmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2hhbmRsZUNhcmRDbGljayk7XG4gICAgfVxuXG4gICAgY3JlYXRlQ2FyZCA9ICgpID0+IHtcbiAgICAgICAgdGhpcy52aWV3ID0gdGhpcy5fdGVtcGxhdGUuY29udGVudC5jbG9uZU5vZGUodHJ1ZSkucXVlcnlTZWxlY3RvcignLmVsZW1lbnQnKTtcbiAgICAgICAgdGhpcy5fY2FyZEltYWdlID0gdGhpcy52aWV3LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19waG90bycpO1xuICAgICAgICB0aGlzLnZpZXcucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX3RpdGxlJykudGV4dENvbnRlbnQgPSB0aGlzLl9lbGVtZW50VGl0bGU7XG4gICAgICAgIHRoaXMuX2NhcmRJbWFnZS5hbHQgPSB0aGlzLl9lbGVtZW50VGl0bGU7XG4gICAgICAgIHRoaXMuX2NhcmRJbWFnZS5zcmMgPSB0aGlzLl9lbGVtZW50UGhvdG87XG5cbiAgICAgICAgdGhpcy5fc2V0TGlzdGVuZXIoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMudmlldztcbiAgIH1cbn1cbiIsImV4cG9ydCBjb25zdCBjb25maWcgPSB7XG4gICAgbmFtZUVycm9yIDogJ3BvcHVwX19uYW1lX2Vycm9yJyxcbiAgICBidXR0b25JbnZhbGlkOiAncG9wdXBfX2J1dHRvbl9pbnZhbGlkJyxcbiAgICBidXR0b25WYWxpZCA6ICdwb3B1cF9fYnV0dG9uX3ZhbGlkJyxcbiAgICBidXR0b25TdWJtaXQ6Jy5wb3B1cF9fYnV0dG9uJyxcbn0iLCJleHBvcnQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gICAgY29uc3RydWN0b3IoY29uZmlnLCBmb3JtRWxlbWVudCkge1xuICAgICAgICB0aGlzLl9jb25maWcgPSBjb25maWc7XG4gICAgICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XG4gICAgICAgIHRoaXMuX2J1dHRvbiA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fY29uZmlnLmJ1dHRvblN1Ym1pdCk7XG4gICAgfVxuXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQpO1xuICAgICAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICB0aGlzLl9oYW5kbGVGb3JtSW5wdXQpO1xuICAgIH1cblxuICAgIF9oYW5kbGVGb3JtU3VibWl0ID0gKGV2dCkgPT4ge1xuICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG5cbiAgICBfaGFuZGxlRm9ybUlucHV0ID0gKGV2dCkgPT4ge1xuICAgICAgICBjb25zdCBpbnB1dCA9IGV2dC50YXJnZXQ7XG4gICAgICAgIHRoaXMuX3NldEN1c3RvbUVycm9yKGlucHV0KTtcbiAgICAgICAgdGhpcy5zZXRTdWJtaXRCdXR0b25TdGF0ZSgpO1xuICAgIH1cblxuICAgIF9zZXRDdXN0b21FcnJvciA9IChpbnB1dCkgPT4ge1xuICAgICAgICBpZighaW5wdXQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgICAgICAgIGlucHV0LmNsYXNzTGlzdC5hZGQodGhpcy5fY29uZmlnLm5hbWVFcnJvcik7XG4gICAgICAgICAgICBjb25zdCBzcGFuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgIyR7aW5wdXQuaWR9LWVycm9yYCk7XG4gICAgICAgICAgICBzcGFuLnRleHRDb250ZW50ID0gaW5wdXQudmFsaWRhdGlvbk1lc3NhZ2U7XG4gICAgICAgIH0gIGVsc2Uge1xuICAgICAgICAgICAgaW5wdXQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9jb25maWcubmFtZUVycm9yKTtcbiAgICAgICAgICAgIGNvbnN0IHNwYW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dC5pZH0tZXJyb3JgKTtcbiAgICAgICAgICAgIHNwYW4udGV4dENvbnRlbnQgPSBcIlwiO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc2V0U3VibWl0QnV0dG9uU3RhdGUgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGlzVmFsaWQgPSB0aGlzLl9mb3JtRWxlbWVudC5jaGVja1ZhbGlkaXR5KCk7XG5cbiAgICAgICAgaWYgKCFpc1ZhbGlkKSB7XG4gICAgICAgICAgICB0aGlzLl9idXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9jb25maWcuYnV0dG9uSW52YWxpZCk7XG4gICAgICAgICAgICB0aGlzLl9idXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9jb25maWcuYnV0dG9uVmFsaWQpO1xuICAgICAgICAgICAgdGhpcy5fYnV0dG9uLnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCAndHJ1ZScpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fY29uZmlnLmJ1dHRvbkludmFsaWQpO1xuICAgICAgICAgICAgdGhpcy5fYnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5fY29uZmlnLmJ1dHRvblZhbGlkKTtcbiAgICAgICAgICAgIHRoaXMuX2J1dHRvbi5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJyk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJleHBvcnQgY2xhc3MgUG9wdXAge1xuICAgIGNvbnN0cnVjdG9yKHNlbGVjdG9yUG9wdXApIHtcbiAgICAgICAgdGhpcy5wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JQb3B1cCk7XG4gICAgICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcbiAgICB9XG5cbiAgICBvcGVuKCkge1xuICAgICAgICB0aGlzLnBvcHVwLmNsYXNzTGlzdC5hZGQoJ3BvcHVwX29wZW5lZCcpO1xuICAgICAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSgpO1xuICAgIH1cblxuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLnBvcHVwLmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwX29wZW5lZCcpO1xuICAgICAgICB0aGlzLnBvcHVwLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSlcbiAgICB9XG5cbiAgICBfaGFuZGxlRXNjQ2xvc2UoKSB7XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoKGV2dCkgPT4ge1xuICAgICAgICAgICAgaWYgKGV2dC5rZXkgPT09ICdFc2NhcGUnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSlcbiAgICB9XG5cbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgdGhpcy5wb3B1cC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCAoZXZ0KSA9PiB7XG4gICAgICAgICAgICBpZihldnQudGFyZ2V0ID09PSBldnQuY3VycmVudFRhcmdldCB8fCBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXBfX2Nsb3NlJykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfVxufVxuIiwiaW1wb3J0IHtQb3B1cH0gZnJvbSAnLi9Qb3B1cC5qcyc7XG5cbmV4cG9ydCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICAgIGNvbnN0cnVjdG9yKGNhbGxiYWNrU3VibWl0Rm9ybSAsc2VsZWN0b3JQb3B1cCkge1xuICAgICAgICBzdXBlcihzZWxlY3RvclBvcHVwKTtcbiAgICAgICAgdGhpcy5fY2FsbGJhY2tTdWJtaXRGb3JtID0gY2FsbGJhY2tTdWJtaXRGb3JtO1xuICAgICAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLnBvcHVwLnF1ZXJ5U2VsZWN0b3JBbGwoJy5wb3B1cF9fbmFtZScpO1xuICAgICAgICB0aGlzLl9mb3JtID0gdGhpcy5wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2NvbnRhaW5lcicpO1xuICAgIH1cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgc3VwZXIuY2xvc2UoKTtcbiAgICAgICAgdGhpcy5fZm9ybS5yZXNldCgpO1xuICAgIH1cbiAgICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgICAgIHRoaXMudmFsdWVzID0ge307XG4gICAgICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKGlucHV0RWxlbWVudCA9PiB7XG4gICAgICAgICAgICB0aGlzLnZhbHVlc1tpbnB1dEVsZW1lbnQubmFtZV0gPSBpbnB1dEVsZW1lbnQudmFsdWU7XG4gICAgICAgIH0pXG4gICAgICAgIHJldHVybiB0aGlzLnZhbHVlcztcbiAgICB9XG5cbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICAgICAgdGhpcy5wb3B1cC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9jYWxsYmFja1N1Ym1pdEZvcm0odGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIH0pXG4gICAgfVxufVxuXG5cblxuXG5cblxuXG4iLCJpbXBvcnQge1BvcHVwfSBmcm9tICcuL1BvcHVwLmpzJztcblxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICAgIGNvbnN0cnVjdG9yKHNlbGVjdG9yUG9wdXApIHtcbiAgICAgICAgc3VwZXIoc2VsZWN0b3JQb3B1cCk7XG4gICAgICAgIHRoaXMuX2ltYWdlUG9wdXAgPSB0aGlzLnBvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cC1mdWxsc2NyZWVuX19pbWFnZScpO1xuICAgICAgICB0aGlzLl90aXRsZVBvcHVwID0gdGhpcy5wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXAtZnVsbHNjcmVlbl9fdGl0bGUnKTtcbiAgICB9XG4gICAgb3BlbihlbGVtZW50VGl0bGUsIGVsZW1lbnRQaG90bykge1xuICAgICAgICB0aGlzLl9pbWFnZVBvcHVwLnNyYyA9IGVsZW1lbnRQaG90bztcbiAgICAgICAgdGhpcy5faW1hZ2VQb3B1cC5hbHQgPSBlbGVtZW50VGl0bGU7XG4gICAgICAgIHRoaXMuX3RpdGxlUG9wdXAudGV4dENvbnRlbnQgPSBlbGVtZW50VGl0bGU7XG5cbiAgICAgICAgc3VwZXIub3BlbigpO1xuICAgIH1cbn1cbiIsImV4cG9ydCBjbGFzcyBTZWN0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcihpdGVtcywgcmVuZGVyZXIsIGNvbnRhaW5lclNlbGVjdG9yKSB7XG4gICAgICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XG4gICAgICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgICAgIHRoaXMuX2NvbnRhaW5lclNlbGVjdG9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XG4gICAgfVxuXG4gICAgcmVuZGVyU2VjdGlvbigpIHtcbiAgICAgICAgdGhpcy5faXRlbXMuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgICAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xuICAgICAgICB9KVxuICAgIH1cblxuICAgIGFkZEl0ZW0oaXRlbSkge1xuICAgICAgICB0aGlzLl9jb250YWluZXJTZWxlY3Rvci5wcmVwZW5kKGl0ZW0pO1xuICAgIH1cbn0iLCJleHBvcnQgY2xhc3MgVXNlckluZm8ge1xuICAgIGNvbnN0cnVjdG9yKHByb2ZpbGVOYW1lLCBwcm9maWxlU3RhdHVzKSB7XG4gICAgICAgIHRoaXMuX3Byb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwcm9maWxlTmFtZSk7XG4gICAgICAgIHRoaXMuX3Byb2ZpbGVTdGF0dXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHByb2ZpbGVTdGF0dXMpO1xuICAgIH1cblxuICAgIGdldFVzZXJJbmZvKCkge1xuICAgICAgICB0aGlzLnZhbHVlcyA9IHtcbiAgICAgICAgICAgIG5hbWUgOiB0aGlzLl9wcm9maWxlTmFtZS50ZXh0Q29udGVudCxcbiAgICAgICAgICAgIHN0YXR1cyA6IHRoaXMuX3Byb2ZpbGVTdGF0dXMudGV4dENvbnRlbnRcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy52YWx1ZXM7XG4gICAgfVxuICAgIHNldFVzZXJJbmZvKG5hbWUsIHN0YXR1cykge1xuICAgICAgICB0aGlzLl9wcm9maWxlTmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgICAgIHRoaXMuX3Byb2ZpbGVTdGF0dXMudGV4dENvbnRlbnQgPSBzdGF0dXM7XG4gICAgfVxufSIsImltcG9ydCAnLi4vcGFnZXMvaW5kZXguY3NzJztcblxuaW1wb3J0IHtpbml0aWFsQ2FyZHN9IGZyb20nLi4vY29tcG9uZW50cy9pbml0aWFsQ2FyZHMnO1xuaW1wb3J0IHtDYXJkfSBmcm9tICcuLi9jb21wb25lbnRzL0NhcmQnO1xuaW1wb3J0IHtjb25maWd9IGZyb20gJy4uL2NvbXBvbmVudHMvY29uZmlnJztcbmltcG9ydCB7Rm9ybVZhbGlkYXRvcn0gZnJvbSAnLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yJztcbmltcG9ydCB7UG9wdXBXaXRoRm9ybX0gZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtJztcbmltcG9ydCB7UG9wdXBXaXRoSW1hZ2V9IGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UnO1xuaW1wb3J0IHtTZWN0aW9ufSBmcm9tICcuLi9jb21wb25lbnRzL1NlY3Rpb24nO1xuaW1wb3J0IHtVc2VySW5mb30gZnJvbSAnLi4vY29tcG9uZW50cy9Vc2VySW5mbyc7XG5cbmNvbnN0IGJ1dHRvbkFkZEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYnV0dG9uJyk7XG5jb25zdCBjYXJkRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cC1hZGQtZWxlbWVudF9fY29udGFpbmVyJyk7XG5jb25zdCBwcm9maWxlRWRpdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19lZGl0Jyk7XG5jb25zdCBwcm9maWxlRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlLXBvcHVwX19jb250YWluZXInKTtcbmNvbnN0IHBvcHVwU3RhdHVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3BvcHVwLXN0YXR1cycpO1xuY29uc3QgcG9wdXBOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3BvcHVwLW5hbWUnKTtcblxuY29uc3QgaW5jbHVkZVVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKCcucHJvZmlsZV9fbmFtZScsICcucHJvZmlsZV9fc3RhdHVzJyk7XG5jb25zdCBmdWxsU2NyZWVuUG9wdXAgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoJy5wb3B1cC1mdWxsc2NyZWVuJyk7XG5mdWxsU2NyZWVuUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuY29uc3QgcG9wdXBGb3JtID0gbmV3IFBvcHVwV2l0aEZvcm0oKGRhdGEpID0+IHtcbiAgaW5jbHVkZVVzZXJJbmZvLnNldFVzZXJJbmZvKGRhdGFbJ3BvcHVwLW5hbWUnXSwgZGF0YVsncG9wdXAtc3RhdHVzJ10pO1xufSwgJy5wcm9maWxlLXBvcHVwJyk7XG4gIHBvcHVwRm9ybS5zZXRFdmVudExpc3RlbmVycygpO1xuXG4gIGNvbnN0IHBvcHVwQ2FyZEZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybShjYXJkRm9ybVN1Ym1pdCwnLnBvcHVwLWFkZC1lbGVtZW50Jyk7XG5wb3B1cENhcmRGb3JtLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmZ1bmN0aW9uIGNhcmRGb3JtU3VibWl0KGRhdGEpIHtcbiAgY2FyZEluaXRpYWwuYWRkSXRlbShjcmVhdGVDYXJkKGRhdGFbJ3BvcHVwLWFkZC1lbGVtZW50LW5hbWUnXSwgZGF0YVsncG9wdXAtYWRkLWVsZW1lbnQtc3JjJ10pKVxufVxuXG5mdW5jdGlvbiBjcmVhdGVDYXJkKHRpdGxlLCBwaG90bykge1xuICBjb25zdCBjYXJkID0gbmV3IENhcmQodGl0bGUsIHBob3RvLCAnLnRlbXBsYXRlJywgKCkgPT4ge1xuICAgIGZ1bGxTY3JlZW5Qb3B1cC5vcGVuKHRpdGxlLCBwaG90byk7XG4gIH0pO1xuICByZXR1cm4gY2FyZC5jcmVhdGVDYXJkKCk7XG59XG5cbnByb2ZpbGVFZGl0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBjb25zdCB1c2VySW5mbyA9IGluY2x1ZGVVc2VySW5mby5nZXRVc2VySW5mbygpO1xuICBwb3B1cE5hbWUudmFsdWUgPSB1c2VySW5mby5uYW1lO1xuICBwb3B1cFN0YXR1cy52YWx1ZSA9IHVzZXJJbmZvLnN0YXR1cztcbiAgcHJvZmlsZUZvcm1WYWxpZGl0eS5zZXRTdWJtaXRCdXR0b25TdGF0ZSgpO1xuICBwb3B1cEZvcm0ub3BlbigpO1xufSk7XG5cbmNvbnN0IGNhcmRJbml0aWFsID0gbmV3IFNlY3Rpb24oaW5pdGlhbENhcmRzLCAoaXRlbSkgPT4ge1xuICBjYXJkSW5pdGlhbC5hZGRJdGVtKGNyZWF0ZUNhcmQoaXRlbS50aXRsZSwgaXRlbS5waG90bykpO1xufSwgJy5lbGVtZW50cycpO1xuY2FyZEluaXRpYWwucmVuZGVyU2VjdGlvbigpO1xuXG5idXR0b25BZGRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBuZXdDYXJkRm9ybVZhbGlkaXR5LnNldFN1Ym1pdEJ1dHRvblN0YXRlKCk7XG4gIHBvcHVwQ2FyZEZvcm0ub3BlbigpO1xufSlcblxuY29uc3QgcHJvZmlsZUZvcm1WYWxpZGl0eSA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZywgcHJvZmlsZUZvcm0pO1xuY29uc3QgbmV3Q2FyZEZvcm1WYWxpZGl0eSA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZywgY2FyZEVsZW1lbnQpO1xuXG5wcm9maWxlRm9ybVZhbGlkaXR5LnNldEV2ZW50TGlzdGVuZXJzKCk7XG5uZXdDYXJkRm9ybVZhbGlkaXR5LnNldEV2ZW50TGlzdGVuZXJzKCk7XG4iLCJleHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xuICAgIHtcbiAgICAgICAgdGl0bGU6ICfQkNGA0YXRi9C3JyxcbiAgICAgICAgcGhvdG86ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvYXJraHl6LmpwZydcbiAgICB9LFxuICAgIHtcbiAgICAgICAgdGl0bGU6ICfQp9C10LvRj9Cx0LjQvdGB0LrQsNGPINC+0LHQu9Cw0YHRgtGMJyxcbiAgICAgICAgcGhvdG86ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvY2hlbHlhYmluc2stb2JsYXN0LmpwZydcbiAgICB9LFxuICAgIHtcbiAgICAgICAgdGl0bGU6ICfQmNCy0LDQvdC+0LLQvicsXG4gICAgICAgIHBob3RvOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2l2YW5vdm8uanBnJ1xuICAgIH0sXG4gICAge1xuICAgICAgICB0aXRsZTogJ9Ca0LDQvNGH0LDRgtC60LAnLFxuICAgICAgICBwaG90bzogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9rYW1jaGF0a2EuanBnJ1xuICAgIH0sXG4gICAge1xuICAgICAgICB0aXRsZTogJ9Cl0L7Qu9C80L7Qs9C+0YDRgdC60LjQuSDRgNCw0LnQvtC9JyxcbiAgICAgICAgcGhvdG86ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQva2hvbG1vZ29yc2t5LXJheW9uLmpwZydcbiAgICB9LFxuICAgIHtcbiAgICAgICAgdGl0bGU6ICfQkdCw0LnQutCw0LsnLFxuICAgICAgICBwaG90bzogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9iYWlrYWwuanBnJ1xuICAgIH1cbl07XG4iXSwibmFtZXMiOlsiQ2FyZCIsImVsZW1lbnRUaXRsZSIsImVsZW1lbnRQaG90byIsInRlbXBsYXRlIiwiaGFuZGxlQ2FyZENsaWNrIiwidmlldyIsInJlbW92ZSIsInF1ZXJ5U2VsZWN0b3IiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZ0IiwidGFyZ2V0IiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiX3JlbW92ZUVsZW1lbnQiLCJfY2FyZEltYWdlIiwiX2hhbmRsZUNhcmRDbGljayIsIl90ZW1wbGF0ZSIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJ0ZXh0Q29udGVudCIsIl9lbGVtZW50VGl0bGUiLCJhbHQiLCJzcmMiLCJfZWxlbWVudFBob3RvIiwiX3NldExpc3RlbmVyIiwidGhpcyIsImRvY3VtZW50IiwiY29uZmlnIiwibmFtZUVycm9yIiwiYnV0dG9uSW52YWxpZCIsImJ1dHRvblZhbGlkIiwiYnV0dG9uU3VibWl0IiwiRm9ybVZhbGlkYXRvciIsImZvcm1FbGVtZW50IiwicHJldmVudERlZmF1bHQiLCJpbnB1dCIsIl9zZXRDdXN0b21FcnJvciIsInNldFN1Ym1pdEJ1dHRvblN0YXRlIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9jb25maWciLCJpZCIsImFkZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2Zvcm1FbGVtZW50IiwiY2hlY2tWYWxpZGl0eSIsIl9idXR0b24iLCJyZW1vdmVBdHRyaWJ1dGUiLCJzZXRBdHRyaWJ1dGUiLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9oYW5kbGVGb3JtSW5wdXQiLCJQb3B1cCIsInNlbGVjdG9yUG9wdXAiLCJwb3B1cCIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwia2V5IiwiY2xvc2UiLCJjdXJyZW50VGFyZ2V0IiwiY29udGFpbnMiLCJQb3B1cFdpdGhGb3JtIiwiY2FsbGJhY2tTdWJtaXRGb3JtIiwiX2NhbGxiYWNrU3VibWl0Rm9ybSIsIl9pbnB1dExpc3QiLCJxdWVyeVNlbGVjdG9yQWxsIiwiX2Zvcm0iLCJyZXNldCIsInZhbHVlcyIsImZvckVhY2giLCJpbnB1dEVsZW1lbnQiLCJuYW1lIiwidmFsdWUiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJQb3B1cFdpdGhJbWFnZSIsIl9pbWFnZVBvcHVwIiwiX3RpdGxlUG9wdXAiLCJTZWN0aW9uIiwiaXRlbXMiLCJyZW5kZXJlciIsImNvbnRhaW5lclNlbGVjdG9yIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lclNlbGVjdG9yIiwiaXRlbSIsInByZXBlbmQiLCJVc2VySW5mbyIsInByb2ZpbGVOYW1lIiwicHJvZmlsZVN0YXR1cyIsIl9wcm9maWxlTmFtZSIsIl9wcm9maWxlU3RhdHVzIiwic3RhdHVzIiwiYnV0dG9uQWRkRWxlbWVudCIsImNhcmRFbGVtZW50IiwicHJvZmlsZUVkaXQiLCJwcm9maWxlRm9ybSIsInBvcHVwU3RhdHVzIiwicG9wdXBOYW1lIiwiaW5jbHVkZVVzZXJJbmZvIiwiZnVsbFNjcmVlblBvcHVwIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJwb3B1cEZvcm0iLCJkYXRhIiwic2V0VXNlckluZm8iLCJwb3B1cENhcmRGb3JtIiwiY2FyZEluaXRpYWwiLCJhZGRJdGVtIiwiY3JlYXRlQ2FyZCIsInRpdGxlIiwicGhvdG8iLCJvcGVuIiwidXNlckluZm8iLCJnZXRVc2VySW5mbyIsInByb2ZpbGVGb3JtVmFsaWRpdHkiLCJyZW5kZXJTZWN0aW9uIiwibmV3Q2FyZEZvcm1WYWxpZGl0eSJdLCJzb3VyY2VSb290IjoiIn0=